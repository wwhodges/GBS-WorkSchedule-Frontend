<app-loading *ngIf="isLoading"></app-loading>
<ng-container *ngIf="!isLoading">
  <div class="row">
    <div class="col col-2">
      <div class="view overlay zoom px-4">
        <img src="{{userImage}}" class="img-fluid z-depth-1" alt="zoom">
        <div class="mask flex-center waves-effect waves-light">
          <p class="white-text">PRH User</p>
        </div>
      </div>
    </div>
    <div class="col col-6">
      <!--Card-->
      <mdb-card>
        <mdb-card-body cascade="true" class="text-center pb-0 px-0">
          <!--Card content-->
          <h4 class="card-title">
            <strong>{{user.forename}} {{user.surname}}</strong>
          </h4>
          <h5>{{user.jobTitle}}</h5>
          <h5>{{user.division}}</h5>

          <mdb-card-text>
            <!--Telephone-->
            <div>
              <i class="fas fa-phone"></i>
              {{user.telephone}}
            </div>
            <!--Email-->
            <div>
              <i class="fas fa-at"></i>
              {{user.email}}
            </div>
          </mdb-card-text>
          <!-- Card footer -->
          <div class="card-footer text-muted text-center mt-4">
            Last Login: {{userService.lastLogin | date:'dd-MM-yyyy'}}
          </div>

        </mdb-card-body>
        <!--/.Card content-->

      </mdb-card>
      <!--/.Card-->
    </div>
    <div class="col col-4">
      <button class="btn btn-primary" (click)="saveData()">Save</button>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12">
      <!--Card-->
      <mdb-card>
        <mdb-card-body>
          <div class="row">
            <div class="col col-4">
              <h4>All Data Fields</h4>
              <ul class="list-group" cdkDropList #allList="cdkDropList" [id]="'allFieldList'"
                [cdkDropListData]="allFields" [cdkDropListConnectedTo]="[schList,unschList]"
                (cdkDropListDropped)="onDrop($event)">
                <li cdkDrag class="list-group-item" *ngFor="let field of allFields;">{{field.desc}}</li>
              </ul>
            </div>
            <div class="col col-4">
              <h4>Unscheduled Screen</h4>
              <ul class="list-group" cdkDropList #unschList="cdkDropList" [cdkDropListData]="userConfig.unscheduledScreen"
                [cdkDropListConnectedTo]="allList" (cdkDropListDropped)="onDrop($event)">
                <li cdkDrag class="list-group-item" *ngFor="let field of userConfig.unscheduledScreen;">{{field.desc}}</li>
              </ul>
            </div>
            <div class="col col-4">
              <h4>Scheduled Screen</h4>
              <ul class="list-group" cdkDropList #schList="cdkDropList" [cdkDropListData]="userConfig.scheduledScreen"
                [cdkDropListConnectedTo]="allList" (cdkDropListDropped)="onDrop($event)">
                <li cdkDrag class="list-group-item" *ngFor="let field of userConfig.scheduledScreen;">{{field.desc}}</li>
              </ul>
            </div>
          </div>
        </mdb-card-body>
      </mdb-card>
    </div>
  </div>
</ng-container>